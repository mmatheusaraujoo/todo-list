<p-blockUI [blocked]="(loading$ | async) || false">
  <p-progressSpinner ariaLabel="loading" />
</p-blockUI>
<p-toast position="bottom-center" key="bc" />
<div class="sm:w-9 lg:w-6 mx-auto my-8">
  <div class="grid">
    <div class="col-11">
      <span class="p-float-label p-fluid">
        <input pInputText id="input-text" [(ngModel)]="inputText" />
        <label for="input-text">Nova Tarefa</label>
      </span>
    </div>
    <div class="col">
      <p-button size="large" icon="pi pi-plus" [rounded]="true" (onClick)="refreshList()"></p-button>
    </div>
  </div>
  <div class="flex flex-auto flex-column gap-3 mt-5">
    <h2>Pendente</h2>
    <ng-container *ngFor="let todo of todoList$ | async; index as i">
      <ng-container *ngIf="!todo.realizado;">
        <p-accordion class="w-full">
          <p-accordionTab>
            <ng-template pTemplate="header">
              <span class="flex align-items-center gap-2 w-full">
                <span class=" font-bold white-space-nowrap">{{todo.nome}}</span>
                <p-badge value="{{todo.prioridade}}" severity="success"></p-badge>
                <div class="ml-auto">
                  <p-button icon="pi pi-check" [rounded]="true" [text]="true" (onClick)="changeState(todo)" />
                  <p-button icon="pi pi-times" [rounded]="true" [text]="true" severity="danger"
                    (onClick)="deleteTodo(todo)" />
                </div>
              </span>
            </ng-template>
            <p class="m-0">
              {{todo.descricao}}
            </p>
          </p-accordionTab>
        </p-accordion>
      </ng-container>
    </ng-container>
  </div>
  <div class="flex flex-auto flex-column gap-3 mt-5">
    <h2>Concluido</h2>
  </div>
</div>